{% extends '_layouts/base.html' %}

{% load static from staticfiles %}

{% block css %}
	{% load static from staticfiles %}
		<!-- pre-define in-house css for main page-->
		<link rel="stylesheet" href="{% static 'css/main-page.css' %}" type="text/css" />
{% endblock css %}

{% block headline %}
{% endblock headline %}

{% block content %}
	<div class="container-fluid">
		<div class="row">
			<div class="col-sm-8">
				<div class="insa-header">
			        	<h1 class="insa-title" style="margin:10px">From “reads” to WGS-based first-line influenza laboratory surveillance</h1>
			        	<p class="insa-description bg-insa-fixed-top" style="">INSaFLU (“INSide the FLU”) is an influenza-specific bioinformatics free web-based suite that deals
								  with primary data (reads) towards the automatic generation of the output data that are actually the core first-line 
								  “genetic requests” for effective and timely influenza laboratory surveillance (e.g., type and sub-type, gene and 
								  whole-genome consensus sequences, variants annotation, alignments and phylogenetic trees). Data integration is continuously 
								  scalable, fitting the need for a real-time epidemiological surveillance during the flu epidemics.</p>
						<p class="insa-title"><a class="btn btn-primary" data-toggle="collapse" href="#collapseExample" aria-expanded="false" aria-controls="collapseExample">Read More</a></p>
						<div class="collapse bg-insa-fixed-top" id="collapseExample">
  							<p class="insa-description-read-more-first">The INSaFLU bioinformatics pipeline currently consists of 6 core steps (see Figure). For more details about INSaFLU, please read 
  							<a href="https://www.biorxiv.org/content/early/2018/01/24/253161" target="_blank">Borges V, Pinheiro M et al. 2018</a>,
  							bioRxiv. A detailed tutorial of INSaFLU usage, as well as documentation about the current software settings and versions,
  							is provided <a href="http://insaflu.readthedocs.io/en/latest/" target="_blank">here</a>.</p>
  							
  							<img src="{% static 'insa/CORE_STEPS.png' %}" style="width:450px; margin-left:auto; margin-right:auto; display: block;" id='insa_logo_id'>
  							<p class="insa-description-read-more-header"><strong>Read quality analysis and improvement</strong></p>
  							<p class="insa-description-read-more">This first step automatically analyzes and improves the quality of the uploaded raw sequencing data (reads). It generates improved NGS 
  							data and graphical quality control reports.</p>
  							
  							<p class="insa-description-read-more-header"><strong>Type and sub-type identification</strong></p>
							<p class="insa-description-read-more">INSaFLU automatically detects the influenza type and sub-type/lineage of each sample upon data submission. This typing data guides 
							the subsequent downstream module and constitutes an optimal complement to the traditional real-time RT-PCR assays, as INSaFLU is able to discriminate all currently defined
							18 hemagglutinin subtypes, 11 neuraminidase sub-types and influenza B lineages.</p>
							<p class="insa-description-read-more-header"><strong>Variant detection and consensus generation</strong></p>
							<p class="insa-description-read-more">This module provides the first-line "genetic data" for seasonal influenza laboratory surveillance, i.e. the list of variants
							(SNPs and indels) and their effect at protein level and also consensus sequences (at both the locus and whole-genome levels). The latter constitutes the whole basis
							for the downstream phylogenetic inferences driving the continuous tracking of influenza temporal/geographical spread.</p>
							<p class="insa-description-read-more-header"><strong>Coverage analysis</strong></p>
							<p class="insa-description-read-more">INSaFLU automatically provides a deep analysis of the vertical and horizontal coverage per sample (for each amplicon),
							by generating several coverage statistics and also graphical plots of the fluctuation of the depth of coverage throughout each amplicon region. This step enables
							the inspection of the technical success and the potential unveiling of relevant genetic events, such as reassortment or homologous recombination.</p>
							<p class="insa-description-read-more-header"><strong>Alignment/phylogeny</strong></p>
							<p class="insa-description-read-more">INSaFLU dynamically builds ready-to-explore nucleotide/amino acid sequence alignments and phylogenetic trees at both locus and
							whole-genome scale. These outputs are automatically re-build and updated as more samples are added to user-restricted INSaFLU projects, making continuous data integration
							completely flexible and scalable.<!--  <strong>This module can also be run independently</strong> over a set of user-selected sequences so that phylogenetic diversity of circulating viruses
							can be better evaluated and integrated according with users’ specific needs. --> Alignments and trees can be explored in situ or through multiple compatible downstream
							applications for fine-tune data analysis.</p>
							<p class="insa-description-read-more-header"><strong>Intra-host minor variant detection (and uncovering of putative mixed infections)</strong></p>
							<p class="insa-description-read-more-last">Influenza evolution has historically been inferred from consensus sequences representing the dominant virus lineage within
							each infected host at a particular instant, which has limited our knowledge on intra-patient virus population diversity and transmission dynamics. In this context,
							INSaFLU additionally provides the user the possibility to get insight on the influenza intra-patient sub-population dynamics by the scrutiny and annotation of minor
							intra-host single nucleotide variants (iSNVs). INSaFLU also automatically flags samples as “putative mixed infections” if the population admixture enrolls influenza
							viruses presenting clearly distinct genetic backgrounds.</p> 
						</div>
			    </div>
			    
			    {% if not is_authenticated %}
			    	<a href="{% url 'login' %}"><p class="login-demo-account">Walkthrough INSaFLU by logging into the "demo" account</p></a>
			    {% endif %}
			    
			    <div class="card">
					<div class="card-block">
						<h4 class="card-title">Future Directions</h4>
						<p class="card-text">INSaFLU is under active development in order to have additional features, such as modules to automatically 
						detect virus reassortment and to perform temporal and geographical data integration and visualization.</p>
					<!-- 	<a href="#" class="card-link">Card link</a>
						<a href="#" class="card-link">Another link</a> -->
					</div>
				</div>
				<p> </p>
				<div class="card">
					<div class="card-block">
						<h4 class="card-title">How to cite</h4>
						<p class="card-text">If you use INSaFLU in your work, please cite this publication:</p>
					 	<a href="https://www.biorxiv.org/content/early/2018/01/24/253161" target="_blank" class="card-link">Borges V, Pinheiro M et al. 2018, bioRxiv</a>
					</div>
				</div>
				<p> </p>
				<div class="card">
					<div class="card-block">
						<h4 class="card-title">Contacts</h4>
						<p class="card-text">If you have any questions, comments or suggestions, please contact us:</p>
					 	<a href="mailto:vitor.borges@insa.min-saude.pt?subject=InsaFlu" class="card-link">vitor.borges at insa.min-saude.pt</a>
					 	<a href="mailto:j.paulo.gomes@insa.min-saude.pt?subject=InsaFlu" class="card-link">j.paulo.gomes at insa.min-saude.pt</a>
					</div>
				</div>
				
				<p> </p>
				<div class="row">
					<img src="{% static 'insa/Republica_Portuguesa_logo.svg' %}" style="width:180px; padding-right:30px; padding-top:15px" id='rep_portuguese_logo_id'>
					<img src="{% static 'insa/SNS_logo.svg' %}" style="width:180px; padding-right:10px" id='sns_logo_id'>
					<a href="http://www.insa.pt/" target="_blank"><img src="{% static 'insa/insa_logo.png' %}" style="width:220px; height:75px; padding-right:12px; padding-top:35px" id='insa_logo_id'></a>
				</div>
			</div>
			
			<div class="col-sm-3 offset-sm-1 insa-sidebar">
				<a href="{% url 'dashboard' %}"><img src="{% static 'insa/insaflu_logo.png' %}" style="width:250px; padding-right:25px; padding-top:15px; padding-bottom:15px" id='main_logo_id'></a>
				<div class="sidebar-module">
					<ol class="list-unstyled" style="font-size: 1.3rem;">
						<li><a href="http://insaflu.readthedocs.io/en/latest/guide_pre_ngs.html#suggested-pre-ngs-wet-lab-protocol" target="_blank">Find here a pre-NGS wet-lab protocol</a></li>
						<li><a href="http://insaflu.readthedocs.io/en/latest/guide_pre_ngs.html#how-to-design-a-ngs-run" target="_blank">Find here how to design a NGS run</a></li>
					</ol>
          		</div>
          		
				<div class="sidebar-module">
					<h4 class="insa-h4">News</h4>
					<div class="insa-post">
		            	<h2 class="insa-post-title-news">INSaFLU 1.0.0 was launched.</h2>
		            	<p class="insa-post-meta">January 25, 2018 by <a href="mailto:vitor.borges@insa.min-saude.pt?subject=InsaFlu" target="_blank">Vitor Borges</a></p>
		            	<p class="insa-news">The first release of INSaFLU was available for the flu community. This platform supplies public health laboratories
							and influenza researchers with an open “one size fits all” bioinformatics framework that potentiates a global WGS-based
							flu surveillance.</p>
		            	<hr>
		            </div>
          		</div>
				<div class="sidebar-module">
					<h4 class="insa-h4">Useful links</h4>
					<ol class="list-unstyled">
					<li><a href="https://www.fludb.org" target="_blank">Influenza Research Database/Fludb</a></li>
					<li><a href="https://www.gisaid.org/" target="_blank">EpiFLU/GISAID</a></li>
					<li><a href="https://www.ncbi.nlm.nih.gov/genomes/FLU/Database/nph-select.cgi?go=database" target="_blank">NCBI Influenza Virus Resource</a></li>
					<li><a href="https://ecdc.europa.eu/en/seasonal-influenza" target="_blank">ECDC</a></li>
					<li><a href="https://www.cdc.gov/flu/index.htm" target="_blank">CDC</a></li>
					<li><a href="http://openflu.vital-it.ch/browse.php" target="_blank">OpenFluDB</a></li>
					<li><a href="https://nextflu.org" target="_blank">Nextflu</a></li>
					<li><a href="https://microreact.org/showcase" target="_blank">Microreact</a></li>
					<li><a href="https://jameshadfield.github.io/phandango/#/" target="_blank">Phandango</a></li>
					<li><a href="http://www.phyloviz.net/" target="_blank">PHYLOViZ</a></li>
					</ol>
				</div>
				
				<div class="sidebar-module sidebar-module-inset">
					<h6>INSaFLU version 1.0.0</h6>
					<p class="insa-authors">Pipeline developed by Vítor Borges and Miguel Pinheiro.</p>
					<p class="insa-authors">Website by Miguel Pinheiro.</p>
				</div>
				
				<div class="disclaimer_main_page">
					<a href="#id_disclaimer_modal" id="id_data_set_add_modal" data-toggle="modal">Disclaimer</a>
				</div>
			</div><!-- /.blog-sidebar -->
		</div> <!-- row -->
	</div>
	
	
	<!-- The Modal -->
	<div class="modal fade" id="id_disclaimer_modal" >
		<div class="modal-dialog modal-dialog-disclaimer modal-lg">
			<div class="modal-content">
   
     					<!-- Modal Header -->
     					<div class="modal-header">
     						<img src="{% static 'insa/insaflu_logo.png' %}" class="remove_box_sizing" style="width:80px;" id='main_insaflu_logo_id'>
       						<h5 class="modal-title"><strong>Disclaimer</strong></h5>
       						<button type="button" class="close" data-dismiss="modal">&times;</button>
     					</div>
     
     					<!-- Modal body -->
     					<div class="modal-body modal-body-disclaimer mx-auto mw-100">
     						<p class="insa-description-read-more-header"><strong>General statement</strong></p>
							<p class="insa-description-read-more">The INSaFLU portal and its associated resources and outputs are for research, 
							educational and informational purposes only, not for commercial use. It is a non-profit service to the scientific community.</p>
							<p class="insa-description-read-more">In any case, the name of INSaFLU and its logo shall not be associated with 
							business promotion without prior written approval.</p>
							
							<p class="insa-description-read-more-header"><strong>Warranties</strong></p>
							<p class="insa-description-read-more">In no event is the access to this portal guaranteed.</p>
							<p class="insa-description-read-more">This portal contains links to external third-party websites. INSaFLU team has not 
							reviewed the contents of these third-party websites and makes no warranty of any kind, expressed or implied, 
							regarding these websites. INSaFLU does not own, monitor, operate or moderate these third-party websites.</p>
							<p class="insa-description-read-more">The User represents and warrants that he/she/it shall not violate or circumvent any 
							safety program or introduce advertisements containing codes or malware, spyware, data corruption, viruses, data infections 
							or other harmful codes, hacking mechanisms, data crash codes and the like.</p>
							<p class="insa-description-read-more">INSaFLU team will not use any data submitted to INSaFLU for research, educational, 
							informational, clinical, commercial or any other purpose.</p>
							<p class="insa-description-read-more">INSaFLU makes no warranties of any kind regarding the accuracy of any data, 
							software and/or database.</p>
							
							<p class="insa-description-read-more-header"><strong>Liability</strong></p>
							<p class="insa-description-read-more">The INSaFLU team is responsible for maintaining and updating the content of INSaFLU.
							However,  INSaFLU team makes no representation or warranty regarding results obtained from using any information, tools or
							services offered by INSaFLU.</p>
							<p class="insa-description-read-more">In case of unexpected issues, unexpected disruption, force majeure and similar events,
							such as: unauthorized or accidental destruction of data; accidental loss; technical faults; forgery, theft or unlawful 
							use; unauthorized alteration, copying, access or other unauthorized processing and the like; violation or circumvention
							of any safety program or the introduction of advertisements containing codes or malware, spyware, data corruption, 
							viruses, data infections or other harmful codes, hacking mechanisms, data crash codes and the like, by any third 
							party or by any user, the INSaFLU team shall not be held liable for, including but not limited to, any liabilities,
							losses, loss of profits, data loss, damages, claims, costs and expenses (including legal fees) resulting from such
							circumstances.</p>
							
							<p class="insa-description-read-more-header"><strong>Personal data</strong></p>
							<p class="insa-description-read-more">The user is entirely responsible for maintaining the confidentiality of his/her 
							password and account and for all activities that occur under your account. The user agrees to notify the INSaFLU team 
							immediately of any unauthorized use of his/her personal data or of any other breach of security that she/he becomes aware of. 
							The INSaFLU team is not be liable for any loss that you may incur as a result of someone else using your personal account, 
							either with or without your knowledge. The INSaFLU team reserves the right, solely for security reasons to suspend or delete 
							a user account.</p>
							<p class="insa-description-read-more"><strong>The INSaFLU team will neither use any data submitted to INSaFLU for any purpose, 
							nor claim ownership of any data stored by users in their personal space.</strong> The INSaFLU team will respect the privacy of the 
							information stored in the private space of the users.</p>
							<p class="insa-description-read-more">The INSaFLU reserves the right to disable a query if it causing technical problems 
							to its computational infrastructure. Such disabled queries will be reported to the users.</p>
     					</div>
     					<!-- Modal footer -->
     					<div class="modal-footer">
       					<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
     					</div>
			</div>
 		</div>
	</div>
 			
{% endblock %}