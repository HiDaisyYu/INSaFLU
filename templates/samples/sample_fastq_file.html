{% extends '_layouts/base.html' %}

{% load bootstrap4 %}
{% load querystring from django_tables2 %}
{% load title from django_tables2 %}
{% load trans blocktrans from i18n %}
{% load django_bootstrap_breadcrumbs %}

{% block css %}
	{% load static from staticfiles %}
		<link rel="stylesheet" href="{% static 'css/flu-web-site.css' %}" type="text/css" />
{% endblock css %}

<!-- Breadcrumbs-->
{% block breadcrumbs %}
	{{ block.super }}
	{% breadcrumb "Samples" "samples" %}
	{% breadcrumb "Add fastq files" "sample-add-fastq" %}
{% endblock %}

<!-- Main content-->
{% block content %}
	
	{% if table.page and show_paginatior %}
	  <div class="table-container">
	{% endif %}
	
	{% block table %}
	    <div class="table-responsive">
	        <table class="table table-hover table-bordered table-striped"{% if table.attrs %} {{ table.attrs.as_html }}{% endif %}>
	            {% block table.thead %}
	            <thead>                 
	                <tr>
	                    <th colspan="7">
	                    	<a href="{% url 'sample-upload-fastq' %}" data-title="Load fastq.gz files to match with samples added by a 'csv' sample file" 
	                    		class="btn btn-small btn-primary dark"><span class="hidden-phone"><i class="fa fa-upload"></i> Upload fastq.gz files</span></a>
	                        <form id="form_samples_fastq_id" method="get" class="form-inline form-search pull-right">
	                          {% csrf_token %}
	                           <div class="form-check">
		                           	<label class="form-check-label" style="padding-right:15px;">
	      								<input id="show_not_only_checked_id" type="checkbox" name="show-not-only-checked" class="form-check-input" {% if check_box_not_show_processed_files %} checked {% endif %} >Show only not processed files
	      							</label>
	                           </div>
	                           <div class="form-group"> 
	                              <input id="search_form_id" name="search_samples" type="text" class="form-control col-md-8" placeholder="File name, Owner"{% if search_samples %} value="{{ search_samples }}"{% endif %}>
	                              <button id="search_submit_id" type="submit" class="btn btn-small btn-dark"><i class="fa fa-search"></i> Search</button>
	                           </div>              
	                        </form>
	                    </th>                  
	                </tr>
	             
	              <tr>
	                {% for column in table.columns %}
	                    {% if column.orderable %}
	                    	<th {{ column.attrs.th.as_html }}><a href="{% querystring table.prefixed_order_by_field=column.order_by_alias.next %}">{{ column.header|title }}</a></th>
	                    {% else %}
	                    	<th {{ column.attrs.th.as_html }}>{{ column.header|title }}</th>
	                    {% endif %}
	                {% endfor %}
	              </tr>
	            </thead>
	            {% endblock table.thead %}
	            {% block table.tbody %}
	            <tbody>
	                {% for row in table.page.object_list|default:table.rows %} {# support pagination #}
	                  {% block table.tbody.row %}
	                  <tr class="{% cycle "odd" "even" %}">
	                      {% for column, cell in row.items %}
	                          <td {{ column.attrs.td.as_html }}>{{ cell }}</td>
	                      {% endfor %}
	                  </tr>
	                  {% endblock table.tbody.row %}
	                {% empty %}
	                  {% if table.empty_text %}
	                  {% block table.tbody.empty_text %}
	                  	<tr><td colspan="{{ table.columns|length }}">{{ table.empty_text }}</td></tr>
	                  {% endblock table.tbody.empty_text %}
	                  {% endif %}
	                {% endfor %}
	            </tbody>
	            {% endblock table.tbody %}
	            {% block table.tfoot %}
	            	<tfoot></tfoot>
	            {% endblock table.tfoot %}
	        </table>
	    </div>
	{% endblock table %}
	
	{% if table.page and show_paginatior %}
	    {% block pagination %}
	    	<label class="pull-right">Total files: {{ total_itens }}</label>
		    {% bootstrap_pagination table.page url=request.get_full_path %}
	    {% endblock pagination %}
	  </div>
	  <p> </p>
	{% endif %}

	<a href="{% url 'samples' %}" class="btn btn-small btn-primary dark"><span class="hidden-phone"><i class="fa fa-arrow-left"></i> Go back</span></a>
{% endblock content %} 

{% block js %}
 	<script type="text/javascript" src="{% static 'js/flu-web-site.js' %}"></script>
 	
 	<script>
 		$("#show_not_only_checked_id").click( function(){
 			$("form#form_samples_fastq_id").submit()
 		});
	</script>
{% endblock js %}
